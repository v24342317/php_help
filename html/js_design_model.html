<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Javascript设计模式理论与实战：状态模式 - 狼狼的蓝胖子 - 博客园</title>
<link type="text/css" rel="stylesheet" href="js_design_model/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="js_design_model/bundle-CodingLife.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/lrzw32/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/lrzw32/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/lrzw32/wlwmanifest.xml">

</head>
<body><link type="text/css" rel="stylesheet" href="js_design_model/jiathis_share.css"><div style="height: auto; position: absolute; z-index: 100000000; display: none; top: 50%; left: 50%; overflow: auto;" class="jiathis_style"><div style="border:10px solid #7F7F7F; width:300px;"><div class="jiadiv_01" style="width:300px;"><div style="background:#F2F2F2;line-height:100%;height:30px;overflow:hidden;width:300px;"><table style="margin:5px 0 0 0;" width="100%"><tbody><tr class="jt_sharetitle" style="line-height:20px!important;"><td style="text-align:left;font-size:12px;" align="left">分享到各大网站</td><td align="right"><img src="js_design_model/img_exit.gif" style="margin:0 4px;cursor:pointer;" onclick="$CKE.centerClose();" border="0"></td></tr></tbody></table></div><div class="searchTxtCont"><div style="background:url(http://v3.jiathis.com/code/images/img_so.gif) no-repeat center;height:30px; width:281px"><form onsubmit="return false;"><input class="searchTxt" name="" onclick="this.value='';this.style.color='#000';" value="输入网站名或拼音缩写" onkeyup="$CKE.choose(this);" type="text"></form></div></div><div id="jiathis_sharelist" class="jiadiv_02" style="width:300px;height:300px;overflow-y:auto;"><a href="javascript:;" onclick="jiathis_sendto('ishare');return false;" class="jiatitle"><span class="jtico jtico_ishare">一键分享</span><input value="ishare,一键分享,yjfx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('ujian');return false;" class="jiatitle"><span class="jtico jtico_ujian">猜你喜欢</span><input value="ujian,猜你喜欢,cnxh" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('copy');return false;" class="jiatitle"><span class="jtico jtico_copy">复制网址</span><input value="copy,复制网址,fzwz" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('fav');return false;" class="jiatitle"><span class="jtico jtico_fav">收藏夹</span><input value="fav,收藏夹,scj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('print');return false;" class="jiatitle"><span class="jtico jtico_print">打印</span><input value="print,打印,dy" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('email');return false;" class="jiatitle"><span class="jtico jtico_email">邮件</span><input value="email,邮件,yj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('qzone');return false;" class="jiatitle"><span class="jtico jtico_qzone">QQ空间</span><input value="qzone,QQ空间,qqkj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tsina');return false;" class="jiatitle"><span class="jtico jtico_tsina">新浪微博</span><input value="tsina,新浪微博,xlwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('weixin');return false;" class="jiatitle"><span class="jtico jtico_weixin">微信</span><input value="weixin,微信,wx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tqq');return false;" class="jiatitle"><span class="jtico jtico_tqq">腾讯微博</span><input value="tqq,腾讯微博,txwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tsohu');return false;" class="jiatitle"><span class="jtico jtico_tsohu">搜狐微博</span><input value="tsohu,搜狐微博,shwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('t163');return false;" class="jiatitle"><span class="jtico jtico_t163">网易微博</span><input value="t163,网易微博,wywb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('renren');return false;" class="jiatitle"><span class="jtico jtico_renren">人人网</span><input value="renren,人人网,rrw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('kaixin001');return false;" class="jiatitle"><span class="jtico jtico_kaixin001">开心网</span><input value="kaixin001,开心网,kxw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('googleplus');return false;" class="jiatitle"><span class="jtico jtico_googleplus">Google+</span><input value="googleplus,Google+,googlej" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('yixin');return false;" class="jiatitle"><span class="jtico jtico_yixin">易信</span><input value="yixin,易信,yx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('alibaba');return false;" class="jiatitle"><span class="jtico jtico_alibaba">阿里巴巴</span><input value="alibaba,阿里巴巴,albb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('douban');return false;" class="jiatitle"><span class="jtico jtico_douban">豆瓣</span><input value="douban,豆瓣,db" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('xiaoyou');return false;" class="jiatitle"><span class="jtico jtico_xiaoyou">朋友网</span><input value="xiaoyou,朋友网,pyw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('sdonote');return false;" class="jiatitle"><span class="jtico jtico_sdonote">麦库记事</span><input value="sdonote,麦库记事,mkjs" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('baidu');return false;" class="jiatitle"><span class="jtico jtico_baidu">百度搜藏</span><input value="baidu,百度搜藏,bdsc" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('taobao');return false;" class="jiatitle"><span class="jtico jtico_taobao">淘江湖</span><input value="taobao,淘江湖,tjh" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('ydnote');return false;" class="jiatitle"><span class="jtico jtico_ydnote">有道云笔记</span><input value="ydnote,有道云笔记,ydybj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('189share');return false;" class="jiatitle"><span class="jtico jtico_189share">手机快传</span><input value="189share,手机快传,sjkc" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tianya');return false;" class="jiatitle"><span class="jtico jtico_tianya">天涯社区</span><input value="tianya,天涯社区,tysq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('feixin');return false;" class="jiatitle"><span class="jtico jtico_feixin">飞信</span><input value="feixin,飞信,fx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tieba');return false;" class="jiatitle"><span class="jtico jtico_tieba">百度贴吧</span><input value="tieba,百度贴吧,bdtb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('qingbiji');return false;" class="jiatitle"><span class="jtico jtico_qingbiji">轻笔记</span><input value="qingbiji,轻笔记,qbj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tifeng');return false;" class="jiatitle"><span class="jtico jtico_tifeng">凤凰微博</span><input value="tifeng,凤凰微博,fhwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('youshi');return false;" class="jiatitle"><span class="jtico jtico_youshi">优士网</span><input value="youshi,优士网,ysw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('fanfou');return false;" class="jiatitle"><span class="jtico jtico_fanfou">饭否</span><input value="fanfou,饭否,ff" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('diandian');return false;" class="jiatitle"><span class="jtico jtico_diandian">点点网</span><input value="diandian,点点网,ddw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('mingdao');return false;" class="jiatitle"><span class="jtico jtico_mingdao">明道</span><input value="mingdao,明道,md" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('zsvs');return false;" class="jiatitle"><span class="jtico jtico_zsvs">中搜v商</span><input value="zsvs,中搜v商,zsvs" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('google');return false;" class="jiatitle"><span class="jtico jtico_google">谷歌</span><input value="google,谷歌,gg" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('buzz');return false;" class="jiatitle"><span class="jtico jtico_buzz">谷歌Buzz</span><input value="buzz,谷歌Buzz,ggbuzz" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('youdao');return false;" class="jiatitle"><span class="jtico jtico_youdao">有道书签</span><input value="youdao,有道书签,ydsq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('cqq');return false;" class="jiatitle"><span class="jtico jtico_cqq">QQ好友</span><input value="cqq,QQ好友,cqq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('qq');return false;" class="jiatitle"><span class="jtico jtico_qq">QQ书签</span><input value="qq,QQ书签,qqsq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('msn');return false;" class="jiatitle"><span class="jtico jtico_msn">MSN</span><input value="msn,MSN,msn" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('pinterest');return false;" class="jiatitle"><span class="jtico jtico_pinterest">Pinterest</span><input value="pinterest,Pinterest,pinterest" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('huaban');return false;" class="jiatitle"><span class="jtico jtico_huaban">花瓣网</span><input value="huaban,花瓣网,hbw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('duitang');return false;" class="jiatitle"><span class="jtico jtico_duitang">堆糖</span><input value="duitang,堆糖,dt" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tyaolan');return false;" class="jiatitle"><span class="jtico jtico_tyaolan">摇篮微博</span><input value="tyaolan,摇篮微博,ylwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('115');return false;" class="jiatitle"><span class="jtico jtico_115">115收藏</span><input value="115,115收藏,115sc" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('hi');return false;" class="jiatitle"><span class="jtico jtico_hi">百度空间</span><input value="hi,百度空间,bdkj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('gmail');return false;" class="jiatitle"><span class="jtico jtico_gmail">Gmail邮箱</span><input value="gmail,Gmail邮箱,gmailyx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('hotmail');return false;" class="jiatitle"><span class="jtico jtico_hotmail">Hotmail邮箱</span><input value="hotmail,Hotmail邮箱,hotmailyx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('xqw');return false;" class="jiatitle"><span class="jtico jtico_xqw">雪球</span><input value="xqw,雪球,xqw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('hexun');return false;" class="jiatitle"><span class="jtico jtico_hexun">和讯</span><input value="hexun,和讯,hx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('toeeee');return false;" class="jiatitle"><span class="jtico jtico_toeeee">南方微博</span><input value="toeeee,南方微博,nfwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('139mail');return false;" class="jiatitle"><span class="jtico jtico_139mail">139邮箱</span><input value="139mail,139邮箱,139yx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('189mail');return false;" class="jiatitle"><span class="jtico jtico_189mail">189邮箱</span><input value="189mail,189邮箱,189yx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('i139');return false;" class="jiatitle"><span class="jtico jtico_i139">爱分享</span><input value="i139,爱分享,afx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('iwo');return false;" class="jiatitle"><span class="jtico jtico_iwo">WO+分享</span><input value="iwo,WO+分享,iwo" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('189cn');return false;" class="jiatitle"><span class="jtico jtico_189cn">翼友圈</span><input value="189cn,翼友圈,yyq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('139');return false;" class="jiatitle"><span class="jtico jtico_139">移动微博</span><input value="139,移动微博,ydwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tpeople');return false;" class="jiatitle"><span class="jtico jtico_tpeople">人民微博</span><input value="tpeople,人民微博,rmwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('cnfol');return false;" class="jiatitle"><span class="jtico jtico_cnfol">中金微博</span><input value="cnfol,中金微博,zjwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('txinhua');return false;" class="jiatitle"><span class="jtico jtico_txinhua">新华微博</span><input value="txinhua,新华微博,xhwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('caimi');return false;" class="jiatitle"><span class="jtico jtico_caimi">财迷</span><input value="caimi,财迷,cm" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('translate');return false;" class="jiatitle"><span class="jtico jtico_translate">谷歌翻译</span><input value="translate,谷歌翻译,ggfy" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tuita');return false;" class="jiatitle"><span class="jtico jtico_tuita">推他</span><input value="tuita,推他,tt" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('mop');return false;" class="jiatitle"><span class="jtico jtico_mop">猫扑推客</span><input value="mop,猫扑推客,mptk" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('digu');return false;" class="jiatitle"><span class="jtico jtico_digu">嘀咕网</span><input value="digu,嘀咕网,dgw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('xianguo');return false;" class="jiatitle"><span class="jtico jtico_xianguo">鲜果</span><input value="xianguo,鲜果,xg" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('faxianla');return false;" class="jiatitle"><span class="jtico jtico_faxianla">发现啦</span><input value="faxianla,发现啦,fxl" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('ganniu');return false;" class="jiatitle"><span class="jtico jtico_ganniu">赶牛网</span><input value="ganniu,赶牛网,gnw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('miliao');return false;" class="jiatitle"><span class="jtico jtico_miliao">米聊</span><input value="miliao,米聊,ml" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('kansohu');return false;" class="jiatitle"><span class="jtico jtico_kansohu">搜狐随身看</span><input value="kansohu,搜狐随身看,shssk" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('51');return false;" class="jiatitle"><span class="jtico jtico_51">51社区</span><input value="51,51社区,51sq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('ifengkb');return false;" class="jiatitle"><span class="jtico jtico_ifengkb">凤凰快博</span><input value="ifengkb,凤凰快博,fhkb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('jcrb');return false;" class="jiatitle"><span class="jtico jtico_jcrb">法律微博</span><input value="jcrb,法律微博,flwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('gmw');return false;" class="jiatitle"><span class="jtico jtico_gmw">光明网</span><input value="gmw,光明网,gmw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('leihou');return false;" class="jiatitle"><span class="jtico jtico_leihou">雷猴网</span><input value="leihou,雷猴网,lhw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('thexun');return false;" class="jiatitle"><span class="jtico jtico_thexun">和讯微博</span><input value="thexun,和讯微博,hxwb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('dream163');return false;" class="jiatitle"><span class="jtico jtico_dream163">游戏江湖</span><input value="dream163,游戏江湖,yxjh" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('masar');return false;" class="jiatitle"><span class="jtico jtico_masar">玛撒网</span><input value="masar,玛撒网,msw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('binzhi');return false;" class="jiatitle"><span class="jtico jtico_binzhi">宾至网</span><input value="binzhi,宾至网,bzw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('fb');return false;" class="jiatitle"><span class="jtico jtico_fb">Facebook</span><input value="fb,Facebook,facebook" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('twitter');return false;" class="jiatitle"><span class="jtico jtico_twitter">Twitter</span><input value="twitter,Twitter,twitter" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tumblr');return false;" class="jiatitle"><span class="jtico jtico_tumblr">Tumblr</span><input value="tumblr,Tumblr,tumblr" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('reddit');return false;" class="jiatitle"><span class="jtico jtico_reddit">Reddit</span><input value="reddit,Reddit,reddit" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('instapaper');return false;" class="jiatitle"><span class="jtico jtico_instapaper">Instapaper</span><input value="instapaper,Instapaper,instapaper" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('pocket');return false;" class="jiatitle"><span class="jtico jtico_pocket">Pocket</span><input value="pocket,Pocket,pocket" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('wealink');return false;" class="jiatitle"><span class="jtico jtico_wealink">若邻网</span><input value="wealink,若邻网,rlw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('leshou');return false;" class="jiatitle"><span class="jtico jtico_leshou">乐收</span><input value="leshou,乐收,ls" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('waakee');return false;" class="jiatitle"><span class="jtico jtico_waakee">挖客网</span><input value="waakee,挖客网,wkw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('cyzone');return false;" class="jiatitle"><span class="jtico jtico_cyzone">创业邦</span><input value="cyzone,创业邦,cyb" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('99earth');return false;" class="jiatitle"><span class="jtico jtico_99earth">救救地球</span><input value="99earth,救救地球,jjdq" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('chouti');return false;" class="jiatitle"><span class="jtico jtico_chouti">抽屉网</span><input value="chouti,抽屉网,ctw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('dig24');return false;" class="jiatitle"><span class="jtico jtico_dig24">递客网</span><input value="dig24,递客网,dkw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('douban9dian');return false;" class="jiatitle"><span class="jtico jtico_douban9dian">豆瓣9点</span><input value="douban9dian,豆瓣9点,db9d" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('meilishuo');return false;" class="jiatitle"><span class="jtico jtico_meilishuo">美丽说</span><input value="meilishuo,美丽说,mls" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('mogujie');return false;" class="jiatitle"><span class="jtico jtico_mogujie">蘑菇街</span><input value="mogujie,蘑菇街,mgj" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('tianji');return false;" class="jiatitle"><span class="jtico jtico_tianji">天际网</span><input value="tianji,天际网,tjw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('poco');return false;" class="jiatitle"><span class="jtico jtico_poco">Poco网</span><input value="poco,Poco网,pocow" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('yijee');return false;" class="jiatitle"><span class="jtico jtico_yijee">易集网</span><input value="yijee,易集网,yjw" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('pdfonline');return false;" class="jiatitle"><span class="jtico jtico_pdfonline">Pdf在线转换</span><input value="pdfonline,Pdf在线转换,pdfzxzh" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('printfriendly');return false;" class="jiatitle"><span class="jtico jtico_printfriendly">友好打印</span><input value="printfriendly,友好打印,yhdy" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('w3c');return false;" class="jiatitle"><span class="jtico jtico_w3c">W3c验证</span><input value="w3c,W3c验证,w3cyz" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('bitly');return false;" class="jiatitle"><span class="jtico jtico_bitly">Bit.ly</span><input value="bitly,Bit.ly,bitly" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('digg');return false;" class="jiatitle"><span class="jtico jtico_digg">Digg</span><input value="digg,Digg,digg" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('mailru');return false;" class="jiatitle"><span class="jtico jtico_mailru">Mail.ru</span><input value="mailru,Mail.ru,mail.ru" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('diigo');return false;" class="jiatitle"><span class="jtico jtico_diigo">Diigo</span><input value="diigo,Diigo,diigo" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('evernote');return false;" class="jiatitle"><span class="jtico jtico_evernote">EverNote</span><input value="evernote,EverNote,evernote" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('friendfeed');return false;" class="jiatitle"><span class="jtico jtico_friendfeed">FriendFeed</span><input value="friendfeed,FriendFeed,friendfeed" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('myspace');return false;" class="jiatitle"><span class="jtico jtico_myspace">Myspace</span><input value="myspace,Myspace,myspace" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('linkedin');return false;" class="jiatitle"><span class="jtico jtico_linkedin">LinkedIn</span><input value="linkedin,LinkedIn,linkedin" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('mixx');return false;" class="jiatitle"><span class="jtico jtico_mixx">Mixx</span><input value="mixx,Mixx,mixx" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('netlog');return false;" class="jiatitle"><span class="jtico jtico_netlog">NetLog</span><input value="netlog,NetLog,netlog" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('netvibes');return false;" class="jiatitle"><span class="jtico jtico_netvibes">Netvibes</span><input value="netvibes,Netvibes,netvibes" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('phonefavs');return false;" class="jiatitle"><span class="jtico jtico_phonefavs">Phonefavs</span><input value="phonefavs,Phonefavs,phonefavs" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('pingfm');return false;" class="jiatitle"><span class="jtico jtico_pingfm">Ping.fm</span><input value="pingfm,Ping.fm,ping.fm" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('plaxo');return false;" class="jiatitle"><span class="jtico jtico_plaxo">Plaxo</span><input value="plaxo,Plaxo,plaxo" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('delicious');return false;" class="jiatitle"><span class="jtico jtico_delicious">Delicious</span><input value="delicious,Delicious,delicious" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('wong');return false;" class="jiatitle"><span class="jtico jtico_wong">Mister Wong</span><input value="wong,Mister Wong,misterwong" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('stumbleupon');return false;" class="jiatitle"><span class="jtico jtico_stumbleupon">Stumbleupon</span><input value="stumbleupon,Stumbleupon,stumbleupon" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('plurk');return false;" class="jiatitle"><span class="jtico jtico_plurk">Plurk</span><input value="plurk,Plurk,plurk" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('funp');return false;" class="jiatitle"><span class="jtico jtico_funp">Funp</span><input value="funp,Funp,funp" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('myshare');return false;" class="jiatitle"><span class="jtico jtico_myshare">Myshare</span><input value="myshare,Myshare,myshare" type="hidden"></a><a href="javascript:;" onclick="jiathis_sendto('fwisp');return false;" class="jiatitle"><span class="jtico jtico_fwisp">Fwisp</span><input value="fwisp,Fwisp,fwisp" type="hidden"></a><div style="clear:both"></div></div><div class="centerBottom"><div style="float:left;font-size:10px;"><a href="http://www.jiathis.com/help/html/what-is-jiathis" class="link_01" style="color:#333333;" target="_blank">这是什么工具?</a></div><div style="float:right;font-size:11px;margin:0 10px 0 0;"><img src="js_design_model/img_012.gif" align="absmiddle" border="none">&nbsp;<a href="http://www.jiathis.com/index2" style="color:#333333;" class="link_01" target="_blank">JiaThis</a></div><div style="clear:both"></div></div></div></div></div>

<!--done-->
<div id="home"><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/lrzw32/p/4994817.html">Javascript设计模式理论与实战：状态模式</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><a name="_labelTop"></a><div id="navCategory"><p style="font-size:18px"><b>阅读目录</b></p><ul><li><a href="#_label0">基础知识</a></li><li><a href="#_label1">状态模式的实现</a></li><li><a href="#_label2">总结</a></li></ul></div><p>在
软件开发中，很大部分时候就是操作数据，而不同数据下展示的结果我们将其抽象出来称为状态，我们平时开发时本质上就是对应用程序的各种状态进行切换并作出
相应处理。状态模式就是一种适合多种状态场景下的设计模式。使用状态模式可以可以让代码更加清晰，提高应用程序的维护性和扩展性。</p>
<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label0"></a></div><h3 id="基础知识">基础知识</h3>
<p>状态模式定义一个对象，这个对象可以通过管理其状态从而使得应用程序作出相应的变化。状态模式是一个非常常用的设计模式，它主要有两个角色组成：<br>（1）环境类：拥有一个状态成员，可以修改其状态并作出相应反应。<br>（2）状态类：表示一种状态，包含其相应的处理方法</p>
<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label1"></a></div><h3 id="状态模式的实现">状态模式的实现</h3>
<h4 id="基本示例">基本示例</h4>
<p>我们简单地通过一个红绿灯的例子来说明状态模式，红绿灯拥有一个状态：哪一种颜色的灯亮了，每一种颜色的灯亮了之后又各自的动作，一共有红绿黄三种颜色的灯，也就是有三种状态。<br>首先，需要一个最基本的红绿灯对象，我们定义如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">var</span> trafficLight = (<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;">2</span>      <span style="color: #0000ff;">var</span> currentLight = <span style="color: #0000ff;">null</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span>      <span style="color: #0000ff;">return</span><span style="color: #000000;"> {
</span><span style="color: #008080;">4</span>          change: <span style="color: #0000ff;">function</span><span style="color: #000000;"> (light) {
</span><span style="color: #008080;">5</span>              currentLight =<span style="color: #000000;"> light;
</span><span style="color: #008080;">6</span> <span style="color: #000000;">             currentLight.go();
</span><span style="color: #008080;">7</span> <span style="color: #000000;">         }
</span><span style="color: #008080;">8</span> <span style="color: #000000;">     }
</span><span style="color: #008080;">9</span>  })();</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div></div>
<p>上面的代码中，trafficLight是一个红绿灯对象，它有一个局部变量currentLight表示当前亮灯的对象，同时返回一个方法，这个方法用来改变红绿灯的状态，并触发相应的处理程序。<br>接着我们定义三种不同颜色的灯，代码如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> RedLight() { }
</span><span style="color: #008080;"> 2</span> RedLight.prototype.go = <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;"> 3</span>     console.log("this is red light"<span style="color: #000000;">);
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> GreenLight() { }
</span><span style="color: #008080;"> 6</span> GreenLight.prototype.go = <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;"> 7</span>     console.log("this is green light"<span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> YellowLight() { }
</span><span style="color: #008080;">10</span> YellowLight.prototype.go = <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;">11</span>     console.log("this is yellow light"<span style="color: #000000;">);
</span><span style="color: #008080;">12</span> }</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div></div>
<p>这段代码分别定义了红绿黄三种颜色的灯对象，每一个对象都包含一个go方法作为亮灯之后的处理程序。<br>接着，我们在客户端进行切换不同颜色的灯：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> trafficLight.change(<span style="color: #0000ff;">new</span><span style="color: #000000;"> RedLight());
</span><span style="color: #008080;">2</span> trafficLight.change(<span style="color: #0000ff;">new</span> YellowLight());</pre>
</div>
<p>通过传入灯对象到change方法中，从而改变红绿灯的状态，触发其相应的处理程序，这就是一个典型的状态模式的应用。</p>
<h4 id="JS组件开发中的状态模式">JS组件开发中的状态模式</h4>
<p>状态模式在开发JS组件时非常有用，我们平时开发组件时很多时候要切换组件的状态，每种状态有不同的处理方式，这个时候就可以使用状态模式进行开发<br>比如我们要开发一个菜单组件，菜单拥有最基本的两种状态：显示和隐藏，相应的显示或隐藏可能会有各自的其他操作。使用状态模式的话，我们首先定义一个环境类，在这里也就是菜单对象，简单地定义如下：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> Menu() { }
</span><span style="color: #008080;">2</span> Menu.prototype.toggle = <span style="color: #0000ff;">function</span><span style="color: #000000;"> (state) {
</span><span style="color: #008080;">3</span> <span style="color: #000000;">    state();
</span><span style="color: #008080;">4</span> }</pre>
</div>
<p>这个菜单类有一个toggle方法用来切换状态，然后调用相应的处理方法。<br>接着我们定义两种状态，定义如下：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">var</span> menuStates =<span style="color: #000000;"> {
</span><span style="color: #008080;">2</span>     "show": <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;">3</span>         console.log("the menu is showing"<span style="color: #000000;">);
</span><span style="color: #008080;">4</span> <span style="color: #000000;">    },
</span><span style="color: #008080;">5</span>     "hide": <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
</span><span style="color: #008080;">6</span>         console.log("the menu is hiding"<span style="color: #000000;">);
</span><span style="color: #008080;">7</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">8</span> };</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="js_design_model/copycode.gif" alt="复制代码"></a></span></div></div>
<p>在这里，通过一个对象menuStates来定义menu的状态，这里有两种状态show和hide，然后拥有相应的处理方法。在使用的时候通过下面的方法进行调用：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">var</span> menu = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Menu();
</span><span style="color: #008080;">2</span> <span style="color: #000000;">menu.toggle(menuStates.show);
</span><span style="color: #008080;">3</span> menu.toggle(menuStates.hide);</pre>
</div>
<p>这段代码实例化了一个Menu对象，然后分别切换了显示和隐藏两种状态，如果有第三种状态，我们只需要menuStates添加相应的状态和处理程序即可。</p>
<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label2"></a></div><h3 id="总结">总结</h3>
<p>状态模式在开发Web组件时非常有用，能让我们的代码结构更加清晰，能够很方便的增加组件的各种状态。使用状态模式的关键是要理清组件的各种状态，搞清楚组件的不同状态和相应的处理函数，对组件后期的维护和扩展有极大的好处。</p>
<p>原文地址：<a href="http://luopq.com/2015/11/25/design-pattern-state/">http://luopq.com/2015/11/25/design-pattern-state/</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
		</div>
	</div>

	
</div><!--end: topics 文章、评论容器--></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
  <div id="divCommentShow"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="opt_under_post"></div>

<div id="HistoryToday" class="c_ad_block"></div>

</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器--><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
  </div><!--end: main -->
	<div class="clear"></div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->



</body></html>